# MoReMouse Light Configuration (Memory-Optimized)
# For GPU with limited VRAM - reduces memory usage by ~60%

# Image encoder (DINOv2)
encoder:
  name: dinov2_vitb14
  pretrained: true
  freeze: true
  input_size: 378       # Paper: 378Ã—378
  feature_dim: 768      # Paper: 768

# Triplane representation (REDUCED)
triplane:
  resolution: 64             # Reduced from 128 (1/4 memory)
  internal_resolution: 32    # Reduced from 64
  channels: 256              # Reduced from 512
  output_channels: 48        # Reduced from 80
  num_planes: 3              # XY, XZ, YZ

# Transformer decoder (REDUCED)
transformer:
  num_layers: 8         # Reduced from 12
  num_heads: 8          # Reduced from 16
  head_dim: 64          # Same
  cross_attn_dim: 768   # Same (must match encoder)
  mlp_dim: 1536         # Reduced from 3072
  dropout: 0.1

# MultiHead MLP decoder
mlp_decoder:
  hidden_layers: 6      # Reduced from 10
  hidden_dim: 64        # Same
  output_channels:
    rgb: 3
    density: 1
    embedding: 3  # Geodesic embedding (HSV)

# NeRF stage settings (REDUCED)
nerf:
  num_samples: 48       # Reduced from 128 (1/3 memory)
  radius: 0.87
  density_activation: trunc_exp
  near: 0.1
  far: 4.0

# DMTet stage settings (REDUCED)
dmtet:
  sdf_bias: -4.0
  grid_resolution: 128       # Reduced from 256
  marching_cubes_resolution: 128

# Gaussian Avatar settings (unchanged)
avatar:
  num_gaussians_per_vertex: 1
  num_vertices: 13059
  num_joints: 140
  uv_resolution: 512
  gaussian_params:
    init_scale: 0.01
    min_scale: 0.001
    max_scale: 0.1
    opacity_init: 0.8

# Geodesic embedding
geodesic:
  embedding_dim: 3
  num_anchor_points: 100
  use_pca: true
